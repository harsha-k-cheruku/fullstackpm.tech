<!-- partials/navbar.html -->
<nav aria-label="Main navigation"
     class="sticky top-0 z-50 h-16 border-b"
     style="background-color: var(--color-bg-primary); border-color: var(--color-border);">
  <div class="mx-auto flex h-full max-w-[1200px] items-center justify-between px-4 sm:px-6">

    <!-- Site name -->
    <a href="/"
       class="text-lg font-bold transition-colors"
       style="color: var(--color-text-primary);">
      fullstackpm.tech
    </a>

    <!-- Desktop nav links -->
    <div class="hidden items-center gap-1 md:flex">
      {% set nav_links = [
        ("Home", "/"),
        ("Projects", "/projects"),
        ("Blog", "/blog"),
        ("About", "/about"),
        ("Contact", "/contact"),
      ] %}
      {% for label, href in nav_links %}
      <a href="{{ href }}"
         class="relative px-3 py-2 text-sm font-medium transition-colors"
         style="color: {{ 'var(--color-text-primary)' if current_page == href else 'var(--color-text-secondary)' }};"
         {% if current_page == href %}aria-current="page"{% endif %}
         onmouseover="this.style.color='var(--color-text-primary)'"
         onmouseout="this.style.color='{{ 'var(--color-text-primary)' if current_page == href else 'var(--color-text-secondary)' }}'">
        {{ label }}
        {% if current_page == href %}
        <span class="absolute bottom-0 left-3 right-3 h-0.5" style="background-color: var(--color-accent);"></span>
        {% endif %}
      </a>
      {% endfor %}
    </div>

    <!-- Right side: theme toggle + mobile menu button -->
    <div class="flex items-center gap-2">

      <!-- Dark mode toggle -->
      <button id="theme-toggle"
              type="button"
              aria-label="Toggle dark mode"
              class="rounded-lg p-2 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2"
              style="color: var(--color-text-secondary); --tw-ring-color: var(--color-accent);"
              onmouseover="this.style.color='var(--color-text-primary)'"
              onmouseout="this.style.color='var(--color-text-secondary)'">
        <!-- Sun icon (shown in dark mode) -->
        <svg id="theme-icon-sun" class="hidden h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" />
        </svg>
        <!-- Moon icon (shown in light mode) -->
        <svg id="theme-icon-moon" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z" />
        </svg>
      </button>

      <!-- Mobile hamburger -->
      <button id="mobile-menu-btn"
              type="button"
              aria-label="Open menu"
              aria-expanded="false"
              aria-controls="mobile-menu"
              class="rounded-lg p-2 transition-colors md:hidden focus:outline-none focus:ring-2 focus:ring-offset-2"
              style="color: var(--color-text-secondary); --tw-ring-color: var(--color-accent);"
              onmouseover="this.style.color='var(--color-text-primary)'"
              onmouseout="this.style.color='var(--color-text-secondary)'">
        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile menu dropdown -->
  <div id="mobile-menu"
       class="hidden border-b md:hidden"
       style="background-color: var(--color-bg-primary); border-color: var(--color-border);">
    <div class="mx-auto max-w-[1200px] px-4 py-3 sm:px-6">
      {% for label, href in nav_links %}
      <a href="{{ href }}"
         class="block rounded-lg px-3 py-2 text-sm font-medium transition-colors"
         style="color: {{ 'var(--color-text-primary)' if current_page == href else 'var(--color-text-secondary)' }};"
         {% if current_page == href %}aria-current="page"{% endif %}>
        {{ label }}
      </a>
      {% endfor %}
    </div>
  </div>
</nav>
